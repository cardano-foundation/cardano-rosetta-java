apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ printf "%s-node-config" .Release.Name }}
  namespace: {{ include "cardano-rosetta-java.namespace" . }}
  labels:
    {{- include "cardano-rosetta-java.commonLabels" . | nindent 4 }}
data:
  {{- $network := .Values.global.network }}
  config.json: |
    {{- .Files.Get (printf "files/node/%s/config.json" $network) | nindent 4 }}
  topology.json: |
    {{- .Files.Get (printf "files/node/%s/topology.json" $network) | nindent 4 }}
  shelley-genesis.json: |
    {{- .Files.Get (printf "files/node/%s/shelley-genesis.json" $network) | nindent 4 }}
  byron-genesis.json: |
    {{- .Files.Get (printf "files/node/%s/byron-genesis.json" $network) | nindent 4 }}
  alonzo-genesis.json: |
    {{- .Files.Get (printf "files/node/%s/alonzo-genesis.json" $network) | nindent 4 }}
  conway-genesis.json: |
    {{- .Files.Get (printf "files/node/%s/conway-genesis.json" $network) | nindent 4 }}
  {{- if .Files.Get (printf "files/node/%s/checkpoints.json" $network) }}
  checkpoints.json: |
    {{- .Files.Get (printf "files/node/%s/checkpoints.json" $network) | nindent 4 }}
  {{- end }}
