"use strict";(self.webpackChunkrosetta_docs=self.webpackChunkrosetta_docs||[]).push([[8809],{5537:(e,r,n)=>{n.d(r,{A:()=>y});var a=n(6540),t=n(4164),i=n(5627),o=n(6347),l=n(372),s=n(604),d=n(1861),c=n(8749);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:r,children:n}=e;return(0,a.useMemo)((()=>{const e=r??function(e){return u(e).map((e=>{let{props:{value:r,label:n,attributes:a,default:t}}=e;return{value:r,label:n,attributes:a,default:t}}))}(n);return function(e){const r=(0,d.XI)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,n])}function p(e){let{value:r,tabValues:n}=e;return n.some((e=>e.value===r))}function f(e){let{queryString:r=!1,groupId:n}=e;const t=(0,o.W6)(),i=function(e){let{queryString:r=!1,groupId:n}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:r,groupId:n});return[(0,s.aZ)(i),(0,a.useCallback)((e=>{if(!i)return;const r=new URLSearchParams(t.location.search);r.set(i,e),t.replace({...t.location,search:r.toString()})}),[i,t])]}function m(e){const{defaultValue:r,queryString:n=!1,groupId:t}=e,i=h(e),[o,s]=(0,a.useState)((()=>function(e){let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!p({value:r,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:r,tabValues:i}))),[d,u]=f({queryString:n,groupId:t}),[m,v]=function(e){let{groupId:r}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(r),[t,i]=(0,c.Dv)(n);return[t,(0,a.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:t}),x=(()=>{const e=d??m;return p({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{x&&s(x)}),[x]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),v(e)}),[u,v,i]),tabValues:i}}var v=n(9136);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(4848);function b(e){let{className:r,block:n,selectedValue:a,selectValue:o,tabValues:l}=e;const s=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),c=e=>{const r=e.currentTarget,n=s.indexOf(r),t=l[n].value;t!==a&&(d(r),o(t))},u=e=>{let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;r=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;r=s[n]??s[s.length-1];break}}r?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},r),children:l.map((e=>{let{value:r,label:n,attributes:i}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:a===r?0:-1,"aria-selected":a===r,ref:e=>{s.push(e)},onKeyDown:u,onClick:c,...i,className:(0,t.A)("tabs__item",x.tabItem,i?.className,{"tabs__item--active":a===r}),children:n??r},r)}))})}function w(e){let{lazy:r,children:n,selectedValue:i}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){const e=o.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,r)=>(0,a.cloneElement)(e,{key:r,hidden:e.props.value!==i})))})}function g(e){const r=m(e);return(0,j.jsxs)("div",{className:(0,t.A)("tabs-container",x.tabList),children:[(0,j.jsx)(b,{...r,...e}),(0,j.jsx)(w,{...r,...e})]})}function y(e){const r=(0,v.A)();return(0,j.jsx)(g,{...e,children:u(e.children)},String(r))}},6335:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"install-and-deploy/hardware-profiles","title":"Hardware Profiles","description":"Hardware profiles for Cardano Rosetta Java","source":"@site/docs/install-and-deploy/hardware-profiles.md","sourceDirName":"install-and-deploy","slug":"/install-and-deploy/hardware-profiles","permalink":"/cardano-rosetta-java/docs/install-and-deploy/hardware-profiles","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-foundation/cardano-rosetta-java/tree/main/docs/docs/install-and-deploy/hardware-profiles.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Hardware Profiles","description":"Hardware profiles for Cardano Rosetta Java","keywords":["hardware","configuration","performance","profiles","PostgreSQL"]},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started with Docker","permalink":"/cardano-rosetta-java/docs/install-and-deploy/docker"},"next":{"title":"Environment Variables","permalink":"/cardano-rosetta-java/docs/install-and-deploy/env-vars"}}');var t=n(4848),i=n(8453),o=n(5537),l=n(9329);const s={sidebar_position:1,title:"Hardware Profiles",description:"Hardware profiles for Cardano Rosetta Java",keywords:["hardware","configuration","performance","profiles","PostgreSQL"]},d="Hardware Profiles",c={},u=[{value:"Overview",id:"overview",level:2},{value:"Available Hardware Profiles",id:"available-hardware-profiles",level:2},{value:"Entry-Level Hardware Profile",id:"entry-level-hardware-profile",level:3},{value:"Mid-Level Hardware Profile",id:"mid-level-hardware-profile",level:3},{value:"Hardware Profile Configuration Parameters",id:"hardware-profile-configuration-parameters",level:2},{value:"Profile Parameters Comparison",id:"profile-parameters-comparison",level:3},{value:"How to Use Hardware Profiles",id:"how-to-use-hardware-profiles",level:2},{value:"Custom Hardware Profiles",id:"custom-hardware-profiles",level:2}];function h(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"hardware-profiles",children:"Hardware Profiles"})}),"\n",(0,t.jsx)(r.p,{children:"Hardware profiles are used to configure the hardware resources for the Cardano Rosetta Java application. They provide preconfigured sets of environment variables to optimize PostgreSQL and connection pooling based on different hardware capabilities."}),"\n",(0,t.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(r.p,{children:"Hardware profiles are implemented as environment files that are passed to Docker or Docker Compose when launching Cardano Rosetta Java services. The entrypoint script verifies these settings and configures PostgreSQL and application connection pools accordingly."}),"\n",(0,t.jsx)(r.h2,{id:"available-hardware-profiles",children:"Available Hardware Profiles"}),"\n",(0,t.jsx)(r.p,{children:"Cardano Rosetta Java provides preconfigured hardware profiles to match different deployment scenarios:"}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsxs)(l.A,{value:"entry",label:"Entry-Level",children:[(0,t.jsx)(r.h3,{id:"entry-level-hardware-profile",children:"Entry-Level Hardware Profile"}),(0,t.jsx)(r.p,{children:"Designed for development environments or smaller deployments with limited resources:"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"4 CPU cores"}),"\n",(0,t.jsx)(r.li,{children:"32 GB RAM"}),"\n",(0,t.jsx)(r.li,{children:"Suitable for development, testing, or light production use"}),"\n"]})]}),(0,t.jsxs)(l.A,{value:"mid",label:"Mid-Level",children:[(0,t.jsx)(r.h3,{id:"mid-level-hardware-profile",children:"Mid-Level Hardware Profile"}),(0,t.jsx)(r.p,{children:"Optimized for production environments with moderate resources:"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"8 CPU cores"}),"\n",(0,t.jsx)(r.li,{children:"48 GB RAM"}),"\n",(0,t.jsx)(r.li,{children:"Suitable for standard production deployments with moderate traffic"}),"\n"]})]})]}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsx)(r.p,{children:"Choose the mid-level profile for production environments with moderate to high traffic."})}),"\n",(0,t.jsx)(r.h2,{id:"hardware-profile-configuration-parameters",children:"Hardware Profile Configuration Parameters"}),"\n",(0,t.jsx)(r.p,{children:"Hardware profiles define two main sets of configuration parameters:"}),"\n",(0,t.jsx)(r.h3,{id:"profile-parameters-comparison",children:"Profile Parameters Comparison"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Entry-Level"}),(0,t.jsx)(r.th,{children:"Mid-Level"}),(0,t.jsx)(r.th,{children:"Purpose"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"API_DB_POOL_MIN_COUNT"}),(0,t.jsx)(r.td,{children:"12"}),(0,t.jsx)(r.td,{children:"150"}),(0,t.jsx)(r.td,{children:"Minimum database connections"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"API_DB_POOL_MAX_COUNT"}),(0,t.jsx)(r.td,{children:"12"}),(0,t.jsx)(r.td,{children:"150"}),(0,t.jsx)(r.td,{children:"Maximum database connections"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_MAX_CONNECTIONS"}),(0,t.jsx)(r.td,{children:"120"}),(0,t.jsx)(r.td,{children:"300"}),(0,t.jsx)(r.td,{children:"Maximum PostgreSQL connections"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_SHARED_BUFFERS"}),(0,t.jsx)(r.td,{children:"1GB"}),(0,t.jsx)(r.td,{children:"4GB"}),(0,t.jsx)(r.td,{children:"Memory for data caching"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_EFFECTIVE_CACHE_SIZE"}),(0,t.jsx)(r.td,{children:"2GB"}),(0,t.jsx)(r.td,{children:"8GB"}),(0,t.jsx)(r.td,{children:"Estimate of memory available for disk caching"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_WORK_MEM"}),(0,t.jsx)(r.td,{children:"16MB"}),(0,t.jsx)(r.td,{children:"64MB"}),(0,t.jsx)(r.td,{children:"Memory for query operations"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_MAINTENANCE_WORK_MEM"}),(0,t.jsx)(r.td,{children:"128MB"}),(0,t.jsx)(r.td,{children:"512MB"}),(0,t.jsx)(r.td,{children:"Memory for maintenance operations"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_WAL_BUFFERS"}),(0,t.jsx)(r.td,{children:"16MB"}),(0,t.jsx)(r.td,{children:"512MB"}),(0,t.jsx)(r.td,{children:"Memory for write-ahead logging"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"DB_POSTGRES_MAX_PARALLEL_WORKERS"}),(0,t.jsx)(r.td,{children:"4"}),(0,t.jsx)(r.td,{children:"8"}),(0,t.jsx)(r.td,{children:"Maximum parallel query workers"})]})]})]}),"\n",(0,t.jsx)(r.h2,{id:"how-to-use-hardware-profiles",children:"How to Use Hardware Profiles"}),"\n","\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{value:"docker",label:"Docker",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"docker run --name rosetta -v {MOUNT_PATH}:/node \\\n  --env-file ./docker/.env.dockerfile \\\n  --env-file ./docker/.env.docker-profile-mid-level \\\n  -p 8082:8082 --shm-size=4g -d cardanofoundation/cardano-rosetta-java:latest\n"})})}),(0,t.jsx)(l.A,{value:"docker-compose",label:"Docker Compose",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"docker compose --env-file .env.docker-compose \\\n  --env-file .env.docker-compose-profile-mid-level \\\n  -f docker-compose.yaml up -d\n"})})})]}),"\n",(0,t.jsx)(r.h2,{id:"custom-hardware-profiles",children:"Custom Hardware Profiles"}),"\n",(0,t.jsx)(r.p,{children:"You can create custom hardware profiles by:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["Copying an existing profile file, e.g., ",(0,t.jsx)(r.code,{children:"docker/.env.docker-profile-mid-level"})]}),"\n",(0,t.jsx)(r.li,{children:"Modifying the parameters to match your hardware"}),"\n",(0,t.jsx)(r.li,{children:"Using the custom profile file when launching with Docker or Docker Compose"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"When creating custom profiles, consider:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Maintain a healthy ratio between ",(0,t.jsx)(r.code,{children:"API_DB_POOL_*_COUNT"})," and ",(0,t.jsx)(r.code,{children:"DB_POSTGRES_MAX_CONNECTIONS"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:["Adjust memory parameters (",(0,t.jsx)(r.code,{children:"DB_POSTGRES_SHARED_BUFFERS"}),", ",(0,t.jsx)(r.code,{children:"DB_POSTGRES_EFFECTIVE_CACHE_SIZE"}),", ",(0,t.jsx)(r.code,{children:"DB_POSTGRES_WORK_MEM"}),", etc.) based on your system's available RAM."]}),"\n",(0,t.jsxs)(r.li,{children:["Set ",(0,t.jsx)(r.code,{children:"DB_POSTGRES_MAX_PARALLEL_WORKERS"})," according to your CPU core count."]}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsx)(r.p,{children:"Hardware profiles help optimize PostgreSQL and connection pooling based on your available resources."})})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>l});var a=n(6540);const t={},i=a.createContext(t);function o(e){const r=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(i.Provider,{value:r},e.children)}},9329:(e,r,n)=>{n.d(r,{A:()=>o});n(6540);var a=n(4164);const t={tabItem:"tabItem_Ymn6"};var i=n(4848);function o(e){let{children:r,hidden:n,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(t.tabItem,o),hidden:n,children:r})}}}]);