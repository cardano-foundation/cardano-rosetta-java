"use strict";(self.webpackChunkrosetta_docs=self.webpackChunkrosetta_docs||[]).push([[2916],{1198:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"advanced-configuration/pruning","title":"Remove Spent UTXOs","description":"Optimizing disk usage with removal of spent UTxOs","source":"@site/docs/advanced-configuration/pruning.md","sourceDirName":"advanced-configuration","slug":"/advanced-configuration/pruning","permalink":"/cardano-rosetta-java/docs/advanced-configuration/pruning","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-foundation/cardano-rosetta-java/tree/main/docs/docs/advanced-configuration/pruning.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Remove Spent UTXOs","description":"Optimizing disk usage with removal of spent UTxOs"},"sidebar":"tutorialSidebar","previous":{"title":"Database Tuning","permalink":"/cardano-rosetta-java/docs/advanced-configuration/db-tuning"},"next":{"title":"Getting Started with H2","permalink":"/cardano-rosetta-java/docs/advanced-configuration/h2-database"}}');var i=t(4848),s=t(8453);const r={sidebar_position:1,title:"Remove Spent UTXOs",description:"Optimizing disk usage with removal of spent UTxOs"},a="Remove Spent UTXOs",d={},c=[{value:"What is UTxO Spent Pruning (removal of spent UTxOs)?",id:"what-is-utxo-spent-pruning-removal-of-spent-utxos",level:2},{value:"When Spent UTxO Removal should be enabled?",id:"when-spent-utxo-removal-should-be-enabled",level:2},{value:"When to avoid setting UtxO Removal feature?",id:"when-to-avoid-setting-utxo-removal-feature",level:2},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Further Reading",id:"further-reading",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"remove-spent-utxos",children:"Remove Spent UTXOs"})}),"\n",(0,i.jsxs)(n.p,{children:["This guide explains how to optimize disk usage in ",(0,i.jsx)(n.strong,{children:"cardano-rosetta-java"})," through removal of spent utxo (a special rosetta-java specific form of pruning)."]}),"\n",(0,i.jsx)(n.h2,{id:"what-is-utxo-spent-pruning-removal-of-spent-utxos",children:"What is UTxO Spent Pruning (removal of spent UTxOs)?"}),"\n",(0,i.jsx)(n.p,{children:"UTxO Spent Pruning removes spent (consumed) UTXOs from local storage, keeping only unspent UTXOs. This can reduce on-disk storage from ~1TB down to ~400GB, but discards historical transaction data."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Only unspent outputs are preserved."}),"\n",(0,i.jsx)(n.li,{children:"You can still validate the chain's current state (and spend tokens), since active UTXOs remain."}),"\n",(0,i.jsx)(n.li,{children:"You should be able to build transaction because only spent UTxOs are removed (unspent stay)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["**Enable Spent UTxO removal **: Set ",(0,i.jsx)(n.code,{children:"REMOVE_SPENT_UTXOS=true"})," in your environment (e.g., in ",(0,i.jsx)(n.code,{children:".env.dockerfile"})," or ",(0,i.jsx)(n.code,{children:".env.docker-compose"}),").\n**Disable Spent UTxO removal ** (default): Set ",(0,i.jsx)(n.code,{children:"REMOVE_SPENT_UTXOS=false"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"when-spent-utxo-removal-should-be-enabled",children:"When Spent UTxO Removal should be enabled?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Low Disk Environments"}),": If you need to minimize disk usage and only require UTXO data for current balances."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Exploratory / Dev Environments"}),": If historical queries are not critical."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),": if you are running into performance / scalability issues, i.e. especially on /account/balance when working with large addresses"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-to-avoid-setting-utxo-removal-feature",children:"When to avoid setting UtxO Removal feature?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Full Historical Data Requirements"}),": If you need the complete transaction history\u2014whether for exchange operations, audit trails, or compliance mandates\u2014do not enable pruning. Pruning discards spent UTXOs, which removes older transaction data and prevents certain types of historical lookups or reporting."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Below is a snippet of how you might configure ",(0,i.jsx)(n.code,{children:".env.dockerfile"})," or ",(0,i.jsx)(n.code,{children:".env.docker-compose"})," for pruning:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# --- Remove Spent UTxOs Toggle ---\nREMOVE_SPENT_UTXOS=true\n"})}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.cdp.coinbase.com/mesh/docs/api-reference/",children:"Rosetta API Reference"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/bloxbean/yaci-store",children:"Yaci-Store Repository"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);