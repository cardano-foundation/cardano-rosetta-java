"use strict";(self.webpackChunkrosetta_docs=self.webpackChunkrosetta_docs||[]).push([[507],{4295:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"legacy-docs/staking-support","title":"Staking Support","description":"Documentation for staking functionality in the legacy Cardano Rosetta implementation","source":"@site/docs/legacy-docs/staking-support.md","sourceDirName":"legacy-docs","slug":"/legacy-docs/staking-support","permalink":"/cardano-rosetta-java/docs/legacy-docs/staking-support","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-foundation/cardano-rosetta-java/tree/main/docs/docs/legacy-docs/staking-support.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Staking Support","description":"Documentation for staking functionality in the legacy Cardano Rosetta implementation"},"sidebar":"tutorialSidebar","previous":{"title":"Rosetta Custom Definitions","permalink":"/cardano-rosetta-java/docs/legacy-docs/rosetta-custom-definitions"},"next":{"title":"Catalyst Vote Support","permalink":"/cardano-rosetta-java/docs/legacy-docs/catalyst-vote-support"}}');var i=t(4848),s=t(8453);const o={sidebar_position:6,title:"Staking Support",description:"Documentation for staking functionality in the legacy Cardano Rosetta implementation"},r="Staking support",d={},c=[{value:"Staking operations",id:"staking-operations",level:2},{value:"Input operation",id:"input-operation",level:3},{value:"Output operation",id:"output-operation",level:3},{value:"Stake key registration",id:"stake-key-registration",level:3},{value:"Stake delegation",id:"stake-delegation",level:3},{value:"Stake key deregistration",id:"stake-key-deregistration",level:3},{value:"Withdrawal",id:"withdrawal",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"staking-support",children:"Staking support"})}),"\n",(0,i.jsx)(n.h2,{id:"staking-operations",children:"Staking operations"}),"\n",(0,i.jsxs)(n.p,{children:["Each of the operations sent in the request of the ",(0,i.jsx)(n.code,{children:"/construction/preprocess"})," and ",(0,i.jsx)(n.code,{children:"/construction/payloads"})," endpoints will have a type which is a string value that could be any of the following:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"'input'"}),"\n",(0,i.jsx)(n.li,{children:"'output'"}),"\n",(0,i.jsx)(n.li,{children:"'stakeKeyRegistration'"}),"\n",(0,i.jsx)(n.li,{children:"'stakeKeyDeregistration'"}),"\n",(0,i.jsx)(n.li,{children:"'stakeDelegation'"}),"\n",(0,i.jsx)(n.li,{children:"'withdrawal'"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The order of these operations is important since they are going to be processed in the transaction body in the following order:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"inputs and outputs"}),"\n",(0,i.jsx)(n.li,{children:"operations that require a certificate, i.e., stake key registration, stake key deregistration and stake delegation"}),"\n",(0,i.jsx)(n.li,{children:"withdrawals"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Some of these operations require an amount and a staking credential as metadata as described as follows:"}),"\n",(0,i.jsx)(n.h3,{id:"input-operation",children:"Input operation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "operation_identifier": {\n    "index": 0,\n    "network_index": 0\n  },\n  "type": "input",\n  "status": "success",\n  "account": {\n    "address": "addr1vxa5pudxg77g3sdaddecmw8tvc6hmynywn49lltt4fmvn7cpnkcpx"\n  },\n  "amount": {\n    "value": "-9000000",\n    "currency": {\n      "symbol": "ADA",\n      "decimals": 6\n    }\n  },\n  "coin_change": {\n    "coin_identifier": {\n      "identifier": "2f23fd8cca835af21f3ac375bac601f97ead75f2e79143bdf71fe2c4be043e8f:1"\n    },\n    "coin_action": "coin_spent"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"output-operation",children:"Output operation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "operation_identifier": {\n    "index": 1\n  },\n  "related_operations": [\n    {\n      "index": 0\n    }\n  ],\n  "type": "output",\n  "status": "success",\n  "account": {\n    "address": "addr1vxa5pudxg77g3sdaddecmw8tvc6hmynywn49lltt4fmvn7cpnkcpx"\n  },\n  "amount": {\n    "value": "10000",\n    "currency": {\n      "symbol": "ADA",\n      "decimals": 6\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"stake-key-registration",children:"Stake key registration"}),"\n",(0,i.jsx)(n.p,{children:"A staking key should be sent as metadata, which should be of the same type of the public key. This is mandatory for this kind of operation."}),"\n",(0,i.jsx)(n.p,{children:"No amount is needed for this operation since the deposit will be calculated with the fixed min key deposit value times the amount of stake key registrations received."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "operation_identifier": {\n    "index": 3\n  },\n  "type": "stakeKeyRegistration",\n  "status": "success",\n  "metadata": {\n    "staking_credential": {\n      "hex_bytes": "1B400D60AAF34EAF6DCBAB9BBA46001A23497886CF11066F7846933D30E5AD3F",\n      "curve_type": "edwards25519"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"stake-delegation",children:"Stake delegation"}),"\n",(0,i.jsx)(n.p,{children:"A staking key should be sent as metadata, which should be of the same type of the public key and also a pool key hash. Both of them are mandatory for this kind of operation."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "operation_identifier": {\n    "index": 3\n  },\n  "type": "stakeDelegation",\n  "status": "success",\n  "metadata": {\n    "staking_credential": {\n      "hex_bytes": "1B400D60AAF34EAF6DCBAB9BBA46001A23497886CF11066F7846933D30E5AD3F",\n      "curve_type": "edwards25519"\n    },\n    "pool_key_hash": "1b268f4cba3faa7e36d8a0cc4adca2096fb856119412ee7330f692b5"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"stake-key-deregistration",children:"Stake key deregistration"}),"\n",(0,i.jsx)(n.p,{children:"A staking key should be sent as metadata, which should be of the same type of the public key. This is mandatory for this kind of operation."}),"\n",(0,i.jsx)(n.p,{children:"No amount is needed for this operation since the refund will be calculated with the fixed min key deposit value times the amount of stake key deregistrations received."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "operation_identifier": {\n    "index": 3\n  },\n  "type": "stakeKeyDeregistration",\n  "status": "success",\n  "metadata": {\n    "staking_credential": {\n      "hex_bytes": "1B400D60AAF34EAF6DCBAB9BBA46001A23497886CF11066F7846933D30E5AD3F",\n      "curve_type": "edwards25519"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"withdrawal",children:"Withdrawal"}),"\n",(0,i.jsx)(n.p,{children:"A staking key should be sent as metadata, which should be of the same type of the public key. This is mandatory for this kind of operation. The amount that is to be withdrawn is also mandatory."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "operation_identifier": {\n    "index": 4\n  },\n  "type": "withdrawal",\n  "status": "success",\n  "amount": {\n    "value": "10000",\n    "currency": {\n      "symbol": "ADA",\n      "decimals": 6\n    }\n  },\n  "metadata": {\n    "staking_credential": {\n      "hex_bytes": "1B400D60AAF34EAF6DCBAB9BBA46001A23497886CF11066F7846933D30E5AD3F",\n      "curve_type": "edwards25519"\n    }\n  }\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(6540);const i={},s=a.createContext(i);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);