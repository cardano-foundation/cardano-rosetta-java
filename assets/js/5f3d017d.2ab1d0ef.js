"use strict";(self.webpackChunkrosetta_docs=self.webpackChunkrosetta_docs||[]).push([[139],{4003:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"api/cardano-specific-additions","title":"Cardano Specific API Additions","description":"Documentation for Cardano-specific API extensions","source":"@site/docs/api/cardano-specific-additions.md","sourceDirName":"api","slug":"/api/cardano-specific-additions","permalink":"/cardano-rosetta-java/docs/api/cardano-specific-additions","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-foundation/cardano-rosetta-java/tree/main/docs/docs/api/cardano-specific-additions.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Cardano Specific API Additions","description":"Documentation for Cardano-specific API extensions"},"sidebar":"tutorialSidebar","previous":{"title":"Cardano Specific API Additions","permalink":"/cardano-rosetta-java/docs/category/cardano-specific-api-additions"},"next":{"title":"Getting Started","permalink":"/cardano-rosetta-java/docs/category/getting-started"}}');var i=t(4848),s=t(8453);const o={sidebar_position:1,title:"Cardano Specific API Additions",description:"Documentation for Cardano-specific API extensions"},r="Introduction",d={},c=[{value:"Endpoint specific changes",id:"endpoint-specific-changes",level:2},{value:"<code>/search/transactions</code>",id:"searchtransactions",level:3},{value:"<code>/block</code>",id:"block",level:3},{value:"<code>Operation</code>",id:"operation",level:3},{value:"<code>/account/coins</code>",id:"accountcoins",level:3},{value:"<code>/construction/derive</code>",id:"constructionderive",level:3},{value:"Examples",id:"examples",level:4},{value:"Base address",id:"base-address",level:5},{value:"Reward address",id:"reward-address",level:5},{value:"Enterprise address",id:"enterprise-address",level:5},{value:"<code>/construction/preprocess</code>",id:"constructionpreprocess",level:3},{value:"Examples of the metadata",id:"examples-of-the-metadata",level:4}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,i.jsxs)(n.p,{children:["Altough ",(0,i.jsx)(n.code,{children:"Cardano Rosetta Java"})," is compliant with ",(0,i.jsx)(n.a,{href:"https://docs.cloud.coinbase.com/rosetta/docs/welcome",children:"Rosetta Spec"}),"\nsome changes were added, mostly as metadata, as they contain Cardano specific information that needs to be either processed or returned."]}),"\n",(0,i.jsx)(n.p,{children:"To keep it easy, clear and upgradable for changes in the future, all specific metadata are added at the end of the api documentation.\nInstruction how to do an API upgrade can be found in the Upgrade Doc (TODO: Add link to Upgrade Doc, when it's written)."}),"\n",(0,i.jsxs)(n.p,{children:["To get a detailed view of the API and the changes use e.g. ",(0,i.jsx)(n.a,{href:"https://swagger.io/",children:"Swagger"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"endpoint-specific-changes",children:"Endpoint specific changes"}),"\n",(0,i.jsx)(n.h3,{id:"searchtransactions",children:(0,i.jsx)(n.code,{children:"/search/transactions"})}),"\n",(0,i.jsxs)(n.p,{children:["Added ",(0,i.jsx)(n.code,{children:"block_identifier"})," this enables the user to search for transactions within a particular block. Either index or hash must be set.\nIf both are set from a different block, the returned list will be empty."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n...\n"block_identifier": {\n"hash": "XXXXXX",\n"index": "000"\n}\n...\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"block",children:(0,i.jsx)(n.code,{children:"/block"})}),"\n",(0,i.jsx)(n.p,{children:"The following metadata is also returned, when querying for block information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"transactionsCount": { "type": "number" },                      // amount of transactions in the block\n"createdBy": { "type": "string" },                              // block creation time in UTC expressed as linux timestamp\n"size": { "type": "number" },                                   // block size in bytes\n"epochNo": { "type": "number" },                                // epoch where the block has been included\n"slotNo": { "type": "integer", "format": "int64" }              // block slot number\n'})}),"\n",(0,i.jsxs)(n.p,{children:["For transaction fields for the ",(0,i.jsx)(n.code,{children:"size"})," and ",(0,i.jsx)(n.code,{children:"scriptSize"})," are added to Transaction metadata."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"size": { "type": "integer", "format": "int64" },               // transaction size in bytes\n"scriptSize": { "type": "integer", "format": "int64" }          // transaction script size in bytes\n'})}),"\n",(0,i.jsx)(n.h3,{id:"operation",children:(0,i.jsx)(n.code,{children:"Operation"})}),"\n",(0,i.jsx)(n.p,{children:"Operations are used to represent transactions. Operations will be returned from API Endpoints from the Data API and used from Construction API to build transactions.\nCardano Rosetta additionally supports also all Operations currently available within the Cardano Blockchain. Available Operations are: Input, Output, Stake_Key_Registration, Stake_Key_Deregistration, Stake_Delegation, Withdrawal, Pool Registraion, Pool Retirement and Vote Registration.\nTo support all of these operations extra metadata in addition to the Rosetta Spec are needed and these are added to the metadata:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"withdrawalAmount": { "type": "Amount"}                             // The amount of ADA that is withdrawn from the staking account. Only use if it\'s a withdrawal operation.\n"depositAmount": { "type": "Amount"}                                // The amount of ADA that is deposited to register for example a stake address or a pool. Only use if it\'s a deposit operation.\n"refundAmount": { "type": "Amount"}                                 // The amount of ADA that is refunded after deregistering a stake address or a pool. Only use if it\'s a refund operation.\n"staking_credential": { "type": "PublicKey"}                        // The credentials used for staking.\n"pool_key_hash": { "type": "string"}                                // The hash of the pool key. Only use if it\'s a pool registration or retirement operation.\n"epoch": { "type": "number"}                                        // The epoch number.\n"tokenBundle": { "type": "TokenBundleItem"}                         // List of token bundles . Only use if it\'s a multi-asset transaction.\n"poolRegistrationCert": { "type": "string"}                         // The Certificate used for pool registration. Only use if it\'s a pool registration operation.\n"poolRegistrationParams": { "type": "PoolRegistrationParams"}       // Extra Parameters for a pool registration. Only use if it\'s a pool registration operation.\n"voteRegistrationMetadata": { "type": "VoteRegistrationMetadata"}   // Metadata to register votes. Only use if it\'s a vote registration operation.\n'})}),"\n",(0,i.jsx)(n.h3,{id:"accountcoins",children:(0,i.jsx)(n.code,{children:"/account/coins"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"include_mempool"})," is an optional parameter that can be used to include mempool transactions in the response.\nIf not set, it will be ignored. Default is false, since mempool tracking is not activated by default as well."]}),"\n",(0,i.jsx)(n.h3,{id:"constructionderive",children:(0,i.jsx)(n.code,{children:"/construction/derive"})}),"\n",(0,i.jsx)(n.p,{children:"Following the rosetta specification this endpoint returns an Enterprise address.\nIn addition to that Cardano Rosetta Java allows the creation of Reward and Base addresses, which aren't supported in the Rosetta specification.\nTherefore, following optional parameters were added as metadata:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"address_type"}),": Either Reward, Base or Enterprise."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"staking_credential"}),": The public key that will be used for creating a Base. It will be ignored if the ",(0,i.jsx)(n.code,{children:"address_type"})," is Reward or Enterprise, since only one key is needed to derive that addresses."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h5,{id:"base-address",children:"Base address"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "network_identifier": { "blockchain": "cardano", "network": "mainnet" },\n  "public_key": {\n    "hex_bytes": "159abeeecdf167ccc0ea60b30f9522154a0d74161aeb159fb43b6b0695f057b3",\n    "curve_type": "edwards25519"\n  },\n  "metadata": {\n    "address_type": "Base",\n    "staking_credential": {\n      "hex_bytes": "964774728c8306a42252adbfb07ccd6ef42399f427ade25a5933ce190c5a8760",\n      "curve_type": "edwards25519"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h5,{id:"reward-address",children:"Reward address"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "network_identifier": { "blockchain": "cardano", "network": "mainnet" },\n  "public_key": {\n    "hex_bytes": "964774728c8306a42252adbfb07ccd6ef42399f427ade25a5933ce190c5a8760",\n    "curve_type": "edwards25519"\n  },\n  "metadata": {\n    "address_type": "Reward"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h5,{id:"enterprise-address",children:"Enterprise address"}),"\n",(0,i.jsx)(n.p,{children:"In this case the metadata is optional, since it will be ignored anyway."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "network_identifier": { "blockchain": "cardano", "network": "mainnet" },\n  "public_key": {\n    "hex_bytes": "159abeeecdf167ccc0ea60b30f9522154a0d74161aeb159fb43b6b0695f057b3",\n    "curve_type": "edwards25519"\n  },\n  "metadata": {\n    "address_type": "Enterprise"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"constructionpreprocess",children:(0,i.jsx)(n.code,{children:"/construction/preprocess"})}),"\n",(0,i.jsxs)(n.p,{children:["To be able to stay compliant with Rosetta spec, but also let the user define a specific ",(0,i.jsx)(n.code,{children:"ttl"})," a new optional parameter within the metadata was introduced. If not set a ",(0,i.jsx)(n.code,{children:"DEFAULT_RELATIVE_TTL"})," will be used.\nAdditionally deposit parameters can be added to the metadata, which are used to take staking and pool operations into account while calculating the transaction size."]}),"\n",(0,i.jsx)(n.h4,{id:"examples-of-the-metadata",children:"Examples of the metadata"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n   "network_identifier": {\n      "blockchain": "cardano",\n      "network": "mainnet"\n   },\n  "operations": [...],\n  "metadata": {\n    "relative_ttl": "100",\n    "deposit_parameters": {\n      "poolDeposit": "500000000",\n      "keyDeposit": "2000000"\n    }\n  }\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(6540);const i={},s=a.createContext(i);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);