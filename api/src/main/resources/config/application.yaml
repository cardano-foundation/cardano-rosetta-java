server:
  compression:
    enabled: true
    mime-types: text/html,text/plain,text/css,application/javascript,application/json
    min-response-size: 1024
  port: ${API_PORT:8082}

spring:
  profiles:
    active: ${API_SPRING_PROFILES_ACTIVE:online}
  jackson:
    default-property-inclusion: NON_NULL
    serialization:
      write-dates-as-timestamps: false
  mvc:
    log-resolved-exception: true
  jooq:
    sql-dialect: POSTGRES
    settings:
      render-schema: false
      render-catalog: false

cardano:
  rosetta:
    version:
      ${ROSETTA_VERSION}
    middleware-version: '@revision@'
    db_indexes:
      - idx_address_utxo_amounts_gin
      - idx_address_utxo_epoch
      - idx_address_utxo_owner_addr
      - idx_address_utxo_owner_addr_tx_hash
      - idx_address_utxo_owner_paykey_hash
      - idx_address_utxo_owner_stake_addr
      - idx_address_utxo_owner_stakekey_hash
      - idx_address_utxo_tx_hash
      - idx_block_hash_covering
      - idx_invalid_transaction_hash_slot
      - idx_transaction_block
      - idx_transaction_block_hash
      - idx_transaction_hash_values_join
      - idx_transaction_slot_desc_tx_index_desc
      - idx_withdrawal_address
      - idx_withdrawal_tx_hash

    TOPOLOGY_FILEPATH: ${TOPOLOGY_FILEPATH}
    GENESIS_SHELLEY_PATH: ${GENESIS_SHELLEY_PATH}
    GENESIS_ALONZO_PATH: ${GENESIS_ALONZO_PATH}
    GENESIS_CONWAY_PATH: ${GENESIS_CONWAY_PATH}
    NODE_SUBMIT_API_PORT: ${NODE_SUBMIT_API_PORT}
    CARDANO_NODE_SUBMIT_HOST: ${CARDANO_NODE_SUBMIT_HOST}
    CARDANO_NODE_VERSION: ${CARDANO_NODE_VERSION}
    CARDANO_NODE_SOCKET_PATH: ${CARDANO_NODE_SOCKET_PATH}
    DEVKIT_ENABLED: ${DEVKIT_ENABLED:false}
    DEVKIT_URL: ${DEVKIT_URL:yaci-cli}
    DEVKIT_PORT: ${DEVKIT_PORT:3333}
    SEARCH_LIMIT: ${SEARCH_LIMIT:100}
    OFFLINE_MODE: ${OFFLINE_MODE:false}

    SYNC_GRACE_SLOTS_COUNT: ${SYNC_GRACE_SLOTS_COUNT:100}
    REMOVE_SPENT_UTXOS: ${REMOVE_SPENT_UTXOS:true}
    REMOVE_SPENT_UTXOS_LAST_BLOCKS_GRACE_COUNT: ${REMOVE_SPENT_UTXOS_LAST_BLOCKS_GRACE_COUNT:129600}
    REMOVE_SPENT_UTXOS_BATCH_SIZE: ${REMOVE_SPENT_UTXOS_BATCH_SIZE:3000}
    BLOCK_TRANSACTION_API_TIMEOUT_SECS: ${BLOCK_TRANSACTION_API_TIMEOUT_SECS:5}

    YACI_HTTP_BASE_URL: ${YACI_HTTP_BASE_URL:http://localhost:9095}
    HTTP_CONNECT_TIMEOUT_SECONDS: ${HTTP_CONNECT_TIMEOUT_SECONDS:5}
    HTTP_REQUEST_TIMEOUT_SECONDS: ${HTTP_REQUEST_TIMEOUT_SECONDS:5}

    TOKEN_REGISTRY_ENABLED: ${TOKEN_REGISTRY_ENABLED:true}
    TOKEN_REGISTRY_BASE_URL: ${TOKEN_REGISTRY_BASE_URL:https://tokens.cardano.org/api}
    TOKEN_REGISTRY_CACHE_TTL_HOURS: ${TOKEN_REGISTRY_CACHE_TTL_HOURS:1}
    TOKEN_REGISTRY_LOGO_FETCH: ${TOKEN_REGISTRY_LOGO_FETCH:false}
    TOKEN_REGISTRY_REQUEST_TIMEOUT_SECONDS: ${TOKEN_REGISTRY_REQUEST_TIMEOUT_SECONDS:2}

logging:
  level:
    root: ${LOG:INFO}
  file:
    name: ${LOG_FILE_NAME:rosetta-api.log}
    path: ${LOG_FILE_PATH:/var/log/rosetta-java}
  logback:
    rollingpolicy:
      max-file-size: ${LOG_FILE_MAX_SIZE:10MB}
      max-history: ${LOG_FILE_MAX_HISTORY:10}

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
